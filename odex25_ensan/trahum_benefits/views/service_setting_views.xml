<odoo>
    <!-- Tree View: Service List -->
    <record id="view_service_tree" model="ir.ui.view">
        <field name="name">service.tree</field>
        <field name="model">benefits.service</field>
        <field name="arch" type="xml">
            <tree string="Services" default_order="code" decoration-muted="active == False">
                <field name="code" widget="handle"/>
                <field name="name"/>
                <field name="paths"/>
                <field name="classification_id" widget="many2one_clickable"/>
                <field name="provider_ids" widget="many2many_tags" options="{'no_open': True}"/>
                <field name="enable_disbursement_periodicity" widget="boolean_toggle" invisible="1"/>
                <field name="active" invisible="1"/>
            </tree>
        </field>
    </record>

    <!-- Form View: Service Details -->
    <record id="view_service_form" model="ir.ui.view">
        <field name="name">service.form</field>
        <field name="model">benefits.service</field>
        <field name="arch" type="xml">
            <form string="Service">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" class="oe_inline" placeholder="Enter service name"/>
                            <span class="text-muted ml-2">
                                <field name="code" placeholder="Service Code"/>
                            </span>
                        </h1>
                    </div>

                    <!-- Basic Info Section -->
                    <group>
                        <group string="Basic Information">
                            <field name="code" string="Service Code" help="Unique identifier for the service"/>
                            <field name="paths"/>
                            <field name="classification_id"/>
                            <field name="beneficiary_category"/>
                            <field name="account_id"/>
                            <field name="accountant_id"/>
                            <field name="service_duration"/>
                            <field name="provider_ids" widget="many2many_tags"
                                   domain="[('is_company', '=', True)]"
                                   context="{'default_is_company': True}"
                                   options="{'no_create': True, 'no_open': True}"/>
                        </group>
                        <group string="Status">
                            <field name="enable_disbursement_periodicity" widget="boolean_toggle"/>
                            <field name="active" widget="boolean_toggle"/>
                        </group>
                    </group>

                    <!-- Description -->
                    <notebook>
                        <page string="Description">
                            <field name="description" placeholder="Enter detailed service description..."/>
                        </page>

                        <!-- Outputs -->
                        <page string="Outputs">
                            <field name="output_ids" string="Service Outputs" mode="kanban,tree,form">
                                <kanban>
                                    <field name="name"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_global_click">
                                                <div class="o_kanban_record_title">
                                                    <field name="name"/>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                                <tree editable="bottom">
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>

                        <!-- Attachments -->
                        <page string="Attachments">
                            <field name="attachment_ids" string="Service Attachments" mode="tree">
                                <tree editable="bottom">
                                    <field name="attachment_name"/>
                                    <field name="attach" widget="binary" filename="attachment_file_name"
                                          />

                                    <field name="attach_type"/>

                                </tree>
                            </field>
                        </page>

                        <!-- Disbursement Periodicity Settings -->
                        <page string="Disbursement"
                              attrs="{'invisible': [('enable_disbursement_periodicity', '=', False)]}">
                            <div class="alert alert-info" role="alert">
                                <i class="fa fa-info-circle"/>
                                Configure different disbursement periods based on need categories
                            </div>
                            <field name="disbursement_periodicity_ids" mode="tree,form">
                                <tree editable="bottom" create="1" delete="1" string="Periodicity Settings">
                                    <field name="categories"/>
                                    <field name="periodicity"/>
                                    <field name="value"/>

                                </tree>
                                <form>
                                    <sheet>
                                        <group>
                                            <field name="categories"/>
                                            <field name="periodicity"/>
                                            <field name="value"/>
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Disbursement Periodicity Form View -->
    <record id="view_service_disbursement_periodicity_form" model="ir.ui.view">
        <field name="name">service.disbursement.periodicity.form</field>
        <field name="model">benefits.service.disbursement.periodicity</field>
        <field name="arch" type="xml">
            <form string="Disbursement Periodicity">
                <sheet>
                    <group>
                        <field name="categories"/>
                        <field name="periodicity"/>
                        <field name="value"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action: Open Services -->
    <record id="action_service" model="ir.actions.act_window">
        <field name="name">Services</field>
        <field name="res_model">benefits.service</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{'default_active': True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                <div class="text-center">
                    <i class="fa fa-medkit fa-5x mb-4" style="color: #875a7b;"></i>
                    <h3>Create your first service</h3>
                    <p>Define the services your organization provides to beneficiaries</p>
                </div>
            </p>
        </field>
    </record>

    <!-- Kanban View -->
    <record id="view_service_kanban" model="ir.ui.view">
        <field name="name">service.kanban</field>
        <field name="model">benefits.service</field>
        <field name="arch" type="xml">
            <kanban default_group_by="paths">
                <field name="name"/>
                <field name="code"/>
                <field name="paths"/>
                <field name="classification_id"/>
                <field name="provider_ids"/>
                <field name="active" invisible="1"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_record_title">
                                <span t-esc="record.code.value"/>
                                -
                                <span t-esc="record.name.value"/>
                            </div>
                            <div>
                                <span class="badge" t-attf-class="badge badge-{{{
                                    'primary_care': 'primary',
                                    'family_care': 'success',
                                    'capacity_development': 'info'
                                }[record.s.raw_value] or 'default'}}">
                                    <t t-esc="record.paths.value"/>
                                </span>
                            </div>
                            <div t-if="record.classification_id.value">
                                <i class="fa fa-tag"/>
                                <t t-esc="record.classification_id.value"/>
                            </div>
                            <div t-if="record.provider_ids.raw_value">
                                <i class="fa fa-building"/>
                                <t t-esc="record.provider_ids.raw_value.length"/>
                                Providers
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Menu Item -->
    <menuitem id="benfits_service_settings"
              name="Service Settings"
              parent="odex_benefit.benefit_services"
              action="action_service"
              sequence="2"/>
</odoo>